<!--<ym-header-shared></ym-header-shared>-->

<div class="container-fluid">
    <div class="col-lg-6 col-lg-offset-3">
        <div class="panel panel-body">
            <form (ngSubmit) = submit(asset) #assetForm = "ngForm">

                <div class="form-group">
                    Choose Hardware type
                    <select name="hardwareType" class="form-control" [(ngModel)]="asset.assetType" #hardwareType = "ngModel" (click)="getAvailableAssetList(hardwareType.value)"  required>
                        <option *ngFor="let hardware of hardwareTypes" [value]="hardware">{{hardware}}</option>
                    </select>
                </div>
                <div *ngIf= "asset.assetType">
                    <div *ngIf="isAssign">
                        <div>
                            <div class="form-group">
                                <div class="col-md-6">
                                    <label>Employee ID: </label>
                                </div>
                                <div class="col-md-6">
                                    <select name="employee" class="form-control" [(ngModel)]="selectedEmployee.empId" required #empId="ngModel" (click)="verifyUserRequest()">
                                        <option *ngFor="let user of users" [value]="user.empId">{{user.empId}} | {{user.firstName}} {{user.middleName}} {{user.lastName}} | {{user.email}}</option>
                                    </select>
                                </div>
                                <div *ngIf="!errorMsg" class="col-md-12" [hidden]="empId.valid || empId.pristine"
                                     class="alert alert-danger">
                                    Employee Id is required
                                </div>
                                <div class="col-md-12 alert alert-danger" *ngIf="errorMsg">
                                    Cannot assign asset, user already have an asset.
                                </div>

                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-6">
                                <label for="assetCodeAssign">Asset Code : </label>
                            </div>
                            <div *ngIf = "availableAssets" class="col-md-6">
                                <div *ngIf="isAssets" >
                                    <select  style="margin-top: 3%;" name="assetCode" id="assetCodeAssign" class="form-control" [(ngModel)]="asset.assetCode" #assetCode = "ngModel" (click) = "getAsset(assetCode.value)">
                                        <option *ngFor="let asset of availableAssets.assetList" [value]="asset.assetCode">{{asset.assetCode}}</option>
                                    </select>

                                    <div [hidden]="assetCode.valid || model.pristine"
                                         class="alert alert-danger">
                                        Asset Code is required
                                    </div>
                                </div>

                                <select  [disabled]="true" *ngIf="!isAssets" style="margin-top: 3%;" id="noAssetData" class="form-control" required>
                                    <option value="" disabled selected>No records found</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-6">
                                <label>Date of Issue : </label>
                            </div>
                            <div class="col-md-6">
                                <input name="dateOfIssue" ng2-datetime-picker
                                       date-format="DD-MM-YYYY"
                                       class="form-control"
                                       [(ngModel)]="asset.dateOfIssue"
                                       date-only="true"
                                       #dateOfIssue="ngModel"
                                       required
                                       pattern="^(?:(?:31(-)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(-)(?:0?[1,3-9]|1[0-2])\2))
                                   (?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(-)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|
                                   (?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(-)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$"

                                />
                            </div>
                            <div [hidden]="dateOfIssue.valid || dateOfIssue.pristine"
                                 class="alert alert-danger">
                                Enter a valid date(DD-MM-YYYY)
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-md-6">
                            <label for="model">Model : </label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" name="model" id="model" class="form-control" [(ngModel)] = "asset.model" #model="ngModel" required readonly>
                        </div>
                        <div class="col-md-12" [hidden]="model.valid || model.pristine"
                             class="alert alert-danger">
                            Model is required
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-md-6">
                            <label>Shipping Date : </label>
                        </div>
                        <div class="col-md-6">
                            <input name="shippingDate" ng2-datetime-picker
                                   date-format="DD-MM-YYYY"
                                   class="form-control"
                                   [(ngModel)]="asset.shippingDate"
                                   date-only="true"
                                   #shippingDate="ngModel"
                                   required
                                   pattern="^(?:(?:31(-)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(-)(?:0?[1,3-9]|1[0-2])\2))
                                   (?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(-)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|
                                   (?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(-)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$"

                            />
                        </div>
                        <div [hidden]="shippingDate.valid || shippingDate.pristine"
                             class="alert alert-danger">
                            Enter a valid date(DD-MM-YYYY)
                        </div>
                    </div>

                    <div *ngIf = "asset.assetType === 'Laptop'" class="form-group">
                        <div class="form-group">
                            <div class="col-md-6">
                                <label>Warranty End Date : </label>
                            </div>
                            <div class="col-md-6">
                                <input name="warrantyEndDate" ng2-datetime-picker
                                       date-format="DD-MM-YYYY"
                                       class="form-control"
                                       [(ngModel)]="asset.warrantyEndDate"
                                       date-only="true"
                                       #warrantyEndDate="ngModel"
                                       required
                                       pattern="^(?:(?:31(-)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(-)(?:0?[1,3-9]|1[0-2])\2))
                                   (?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(-)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|
                                   (?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(-)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$"

                                />
                            </div>
                            <div [hidden]="warrantyEndDate.valid || warrantyEndDate.pristine"
                                 class="alert alert-danger">
                                Enter a valid date(DD-MM-YYYY)
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-6">
                                <label>Last Maintainance Date:</label>
                            </div>
                            <div class="col-md-6">
                                <input name="lastMaintenanceDate" ng2-datetime-picker
                                       date-format="DD-MM-YYYY"
                                       class="form-control"
                                       [(ngModel)]="asset.lastMaintenanceDate"
                                       date-only="true"
                                       #lastMaintenanceDate = "ngModel"
                                  />
                            </div>
                            <div [hidden]="lastMaintenanceDate.valid || lastMaintenanceDate.pristine"
                                 class="alert alert-danger">
                                Enter a valid date(DD-MM-YYYY)
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-3">
                                <label>Specs : </label>
                            </div>
                            <div class="col-md-3">
                                <label for="ram">RAM : </label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" name="ram" id="ram" class="form-control" [(ngModel)] = "asset.specs.RAM" #ram="ngModel" required>
                            </div>
                            <div [hidden]="ram.valid || ram.pristine"
                                 class="alert alert-danger">
                                Ram is required
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-3 col-md-offset-3">
                                <label for="hd">HD : </label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" name="hd" id="hd" class="form-control" [(ngModel)] = "asset.specs.HD" #hd="ngModel" required>
                            </div>
                            <div [hidden]="hd.valid || hd.pristine"
                                 class="alert alert-danger">
                                Hard disk is required
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-3 col-md-offset-3">
                                <label for="processor">Processor : </label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" name="processor" id="processor" class="form-control" [(ngModel)] = "asset.specs.Processor" #processor = "ngModel" required>
                            </div>
                            <div [hidden]="processor.valid || processor.pristine"
                                 class="alert alert-danger">
                                Processor is required
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-md-offset-9">
                        <button type="submit"  class="btn btn-default" [disabled] = "!assetForm.form.valid || errorMsg || !isAssets">Add Asset</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>