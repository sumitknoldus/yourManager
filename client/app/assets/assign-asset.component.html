<!--<ym-header-shared></ym-header-shared>-->

<div class="container-fluid">
    <div class="col-sm-6 col-sm-offset-3">
        <div class="panel panel-body">
            <form (ngSubmit) = submit() #assetForm = "ngForm">

                <div class="form-group">
                    Choose Hardware type
                    <select name="hardwareType" class="form-control" [(ngModel)]="asset.assetType" #hardwareType = "ngModel" (click)="getAvailableAssetList(hardwareType.value)"  required>
                        <option *ngFor="let hardware of hardwareTypes" [value]="hardware">{{hardware}}</option>
                    </select>
                </div>

                <div *ngIf= "asset.assetType">
                    <div *ngIf="isAssign">
                        <div *ngIf="isEmpDataAvailable" class="row">
                            <div class="form-group">
                                <div class="col-sm-6 col-xs-12">
                                    <label>Employee ID: </label>
                                </div>
                                <div  class="col-sm-6 col-xs-12">
                                    <select name="employee" class="form-control" [(ngModel)]="asset.empId" required #empId="ngModel" (click)="verifyUserRequest()">
                                        <option *ngFor="let user of users" [value]="user.empId">{{user.empId}} | {{user.firstName}} {{user.middleName}} {{user.lastName}} | {{user.email}}</option>
                                    </select>
                                </div>
                                <div *ngIf="!errorMsg" class="col-sm-12 col-xs-12" [hidden]="empId.valid || empId.pristine"
                                     class="alert alert-danger">
                                    Employee Id is required
                                </div>
                                <div class="col-sm-12 alert alert-danger" *ngIf="errorMsg">
                                    Cannot assign asset, user already have an asset.
                                </div>

                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group">
                                <div class="col-sm-6 col-xs-12">
                                    <label for="assetCodeAssign">Asset Code : </label>
                                </div>
                                <div *ngIf = "!assignNewAsset" class="col-sm-6 col-xs-12">
                                    <div *ngIf="isAssets" >
                                        <select  style="margin-top: 3%;" name="assetCode" id="assetCodeAssign" class="form-control" [(ngModel)]="asset.assetCode" #assetCode = "ngModel" (click) = "getAsset(assetCode.value)">
                                            <option *ngFor="let asset of availableAssets.assetList" [value]="asset.assetCode">{{asset.assetCode}}</option>
                                        </select>

                                        <div [hidden]="assetCode.valid || model.pristine"
                                             class="alert alert-danger">
                                            Asset Code is required
                                        </div>
                                    </div>

                                    <select  [disabled]="true" *ngIf="!isAssets" style="margin-top: 3%;" id="noAssetData" class="form-control" required>
                                        <option value="" disabled selected>No records found</option>
                                    </select>
                                </div>

                                <div *ngIf = "assignNewAsset">
                                    <div class="col-sm-6">
                                        <input type="text" name="assetCode" id="assetCode" class="form-control" [(ngModel)] = "asset.assetCode" #assetCode="ngModel" required readonly pattern="[A-z0-9\- ]{0,10}">
                                    </div>
                                    <div class="col-sm-12" [hidden]="assetCode.valid || assetCode.pristine"
                                         class="alert alert-danger">
                                        Asset Code is required (Max : 10 characters)
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="form-group">
                                <div class="col-sm-6">
                                    <label>Date of Issue : </label>
                                </div>
                                <div class="col-sm-6">
                                    <input name="dateOfIssue" ng2-datetime-picker
                                           date-format="YYYY-MM-DD"
                                           class="form-control"
                                           [(ngModel)]="asset.dateOfIssue"
                                           date-only="true"
                                           #dateOfIssue="ngModel"
                                           required readonly
                                            pattern="^\d{4}[-\/\s]?((((0[13578])|(1[02]))[-\/\s]?(([0-2][0-9])|(3[01])))|(((0[469])|(11))[-\/\s]?(([0-2][0-9])|(30)))|(02[-\/\s]?[0-2][0-9]))$"
                                    />
                                </div>
                                <div [hidden]="dateOfIssue.valid || dateOfIssue.pristine"
                                     class="alert alert-danger">
                                    Enter a valid date(YYYY-MM-DD)
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-group">
                            <div class="col-sm-6">
                                <label for="model">Model : </label>
                            </div>
                            <div class="col-sm-6">
                                <input type="text" name="model" id="model" class="form-control" [(ngModel)] = "asset.model" #model="ngModel" required readonly pattern="[A-z0-9\- ]{0,20}">
                            </div>
                            <div class="col-sm-12" [hidden]="model.valid || model.pristine"
                                 class="alert alert-danger">
                                Model is required (Max : 20 characters)
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-6">
                                <label for="serialNumber">Serial number : </label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" name="serialNumber" id="serialNumber" class="form-control" [(ngModel)] = "asset.serialNumber" #serialNumber="ngModel" readonly pattern="[A-z0-9\- ]{0,20}">
                            </div>
                            <div [hidden]="serialNumber.valid || serialNumber.pristine"
                                 class="alert alert-danger">
                                Serial Number is required (Max : 20 characters)
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-group">
                            <div class="col-sm-6">
                                <label>Shipping Date : </label>
                            </div>
                            <div class="col-sm-6">
                                <input name="shippingDate" ng2-datetime-picker
                                       date-format="YYYY-MM-DD"
                                       class="form-control"
                                       [(ngModel)]="asset.shippingDate"
                                       date-only="true"
                                       #shippingDate="ngModel"
                                       required disabled
                                       pattern="^\d{4}[-\/\s]?((((0[13578])|(1[02]))[-\/\s]?(([0-2][0-9])|(3[01])))|(((0[469])|(11))[-\/\s]?(([0-2][0-9])|(30)))|(02[-\/\s]?[0-2][0-9]))$"
                                />
                            </div>
                            <div [hidden]="shippingDate.valid || shippingDate.pristine"
                                 class="alert alert-danger">
                                Enter a valid date(YYYY-MM-DD)
                            </div>
                        </div>
                    </div>

                    <div class="row">

                        <div *ngIf = "asset.assetType === 'Laptop'" class="form-group">
                            <div class="form-group">
                                <div class="col-sm-6">
                                    <label>Warranty End Date : </label>
                                </div>
                                <div class="col-sm-6">
                                    <input name="warrantyEndDate" ng2-datetime-picker
                                           date-format="YYYY-MM-DD"
                                           class="form-control"
                                           [(ngModel)]="asset.warrantyEndDate"
                                           date-only="true"
                                           #warrantyEndDate="ngModel"
                                           required disabled
                                           pattern="^\d{4}[-\/\s]?((((0[13578])|(1[02]))[-\/\s]?(([0-2][0-9])|(3[01])))|(((0[469])|(11))[-\/\s]?(([0-2][0-9])|(30)))|(02[-\/\s]?[0-2][0-9]))$"
                                    />
                                </div>
                                <div [hidden]="warrantyEndDate.valid || warrantyEndDate.pristine"
                                     class="alert alert-danger">
                                    Enter a valid date(YYYY-MM-DD)
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-sm-6">
                                    <label>Last Maintainance Date:</label>
                                </div>
                                <div class="col-sm-6">
                                    <input name="lastMaintenanceDate" ng2-datetime-picker
                                           date-format="YYYY-MM-DD"
                                           class="form-control"
                                           [(ngModel)]="asset.lastMaintenanceDate"
                                           date-only="true"
                                           #lastMaintenanceDate = "ngModel"
                                           readonly
                                    />
                                </div>
                                <div [hidden]="lastMaintenanceDate.valid || lastMaintenanceDate.pristine"
                                     class="alert alert-danger">
                                    Enter a valid date(YYYY-MM-DD)
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-sm-3">
                                    <label>Specs : </label>
                                </div>
                                <div class="col-sm-3">
                                    <label for="ram">RAM : </label>
                                </div>
                                <div class="col-sm-6">
                                    <input type="text" name="ram" id="ram" class="form-control" [(ngModel)] = "asset.specs.RAM" #ram="ngModel" required readonly pattern="[A-z0-9\- ]{0,10}">
                                </div>
                                <div [hidden]="ram.valid || ram.pristine"
                                     class="alert alert-danger">
                                    Ram is required (Max : 10 characters)
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-3 col-sm-offset-3">
                                    <label for="hd">HD : </label>
                                </div>
                                <div class="col-sm-6">
                                    <input type="text" name="hd" id="hd" class="form-control" [(ngModel)] = "asset.specs.HD" #hd="ngModel" required readonly pattern="[A-z0-9\- ]{0,10}">
                                </div>
                                <div [hidden]="hd.valid || hd.pristine"
                                     class="alert alert-danger">
                                    Hard disk is required (Max : 10 characters)
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-3 col-sm-offset-3">
                                    <label for="processor">Processor : </label>
                                </div>
                                <div class="col-sm-6">
                                    <input type="text" name="processor" id="processor" class="form-control" [(ngModel)] = "asset.specs.Processor" #processor = "ngModel" required readonly pattern="[A-z0-9\- ]{0,25}">
                                </div>
                                <div [hidden]="processor.valid || processor.pristine"
                                     class="alert alert-danger">
                                    Processor is required (Max : 25 characters)
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-sm-offset-8 form-group">
                            <button type="submit"  class="btn btn-default pull-right" [disabled] = "!assetForm.form.valid || errorMsg || !isAssets">Assign Asset</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>